{% extends 'base.html' %}

{% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>


<link rel="stylesheet" href="{{ url_for('static', filename='consultar.css')}}">
    <h3>{% block title %} DETALHES DO ALUNO {% endblock %} </h3>

<div class="consulta" id="consultar">
    <label_aluno> Informações:</label_aluno>
    <p><label_aluno> NOME: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['nome_aluno'] }}</detalhe_aluno></p>
    <p><label_aluno>RA: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['ra'] }}</detalhe_aluno></p>
    <p><label_aluno>DATA DE NASCIMENTO: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['nascimento'] }}</detalhe_aluno></p>
    <p><label_aluno>SÉRIE: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['num_ser'] }}</detalhe_aluno></p>
    <p><label_aluno>TURMA: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['turma'] }}</detalhe_aluno></p>
    <p><label_aluno>SEXO: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['sexo'] }}</detalhe_aluno></p>
    <p><label_aluno>SITUAÇÃO: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['situacao'] }}</detalhe_aluno></p>
    <p><label_aluno>NOME DA MÃE: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['nome_mae'] }}</detalhe_aluno></p>
    <p><label_aluno>PROFISSÃO DA MÃE: </label_aluno>   <detalhe_aluno>{{ detalhe_aluno['profissao_mae'] }}</detalhe_aluno></p>
    <p><label_aluno>LOCAL DE TRABALHO DA MÃE:</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['localtrab_mae'] }}</detalhe_aluno></p>
    <p><label_aluno>DATA DE NASCIMENTO DA MÃE:</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['nasc_mae'] }}</detalhe_aluno></p>
    <p><label_aluno>TELEFONE DA MÃE:</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['fone_mae'] }}</detalhe_aluno></p>
    <p><label_aluno>NOME DO PAI:</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['nome_pai'] }}</detalhe_aluno></p>
    <p><label_aluno>PROFISSÃO DO PAI:</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['profissao_pai'] }}</detalhe_aluno></p>
    <p><label_aluno>LOCAL DE TRABALHO DO PAI:</label_aluno>   <detalhe_aluno> {{detalhe_aluno['localtrab_pai'] }}</detalhe_aluno></p>
    <p><label_aluno>DATA DE NASCIMENTO DO PAI:</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['nasc_pai'] }}</detalhe_aluno></p>
    <p><label_aluno>TELEFONE DO PAI:</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['fone_pai'] }}</detalhe_aluno></p>
    <p><label_aluno>DATA DA MATRICULA</label_aluno>   <detalhe_aluno>{{ detalhe_aluno['created'] }}</detalhe_aluno></p>
</div>
<br>
<!--
    <p><form onclick="CriaPDF()" value="Criar PDF" id="btnpdf"><button type="submit">Gera PDF</button></form></p>
    <p><form onclick="print()" value="imprimir" id="btnImprimir"><button type="submit">Imprimir</button></form></p>
    <p><form action="{{ url_for('menu_area_logada') }}"><button type="submit">Cancelar</button></form></p>
-->
    <p><form method="get" action="{{ url_for('cadastrar_anamnese', ra=detalhe_aluno['ra']) }}"><button type="submit">Cadastrar Anamnese</button></form></p>
    <p><form method="get" action="{{ url_for('consulta_anamnese', ra=detalhe_aluno['ra'])}}"><button type="submit">Consultar Anamnese</button></form></p>



<script>
    // FUNÇÃO JAVASCRIPT IMPRIMIR
  function print() {
        var minhaTabela = document.getElementById('consultar').innerHTML;

        // CRIA UM OBJETO WINDOW
        var win = window.open('', '', 'height=700,width=700');
        win.document.write('<html><head>');
        win.document.write('<title>Detalhe Aluno</title>');   // <title> CABEÇALHO DO PDF.
        win.document.write('</head>');
        win.document.write('<body>');
        win.document.write(minhaTabela);                       // O CONTEUDO DA TABELA DENTRO DA TAG BODY
        win.document.write('</body></html>');
        win.document.close(); 	                               // FECHA A JANELA
        win.print();                                           // IMPRIME O CONTEUDO

    }
</script>


<script>
    // FUNÇÃO JAVASCRIPT GERAR PDF
    function CriaPDF() {

        var pdf = new jsPDF('p', 'pt', 'letter')
            pdf.text('Detalhe do Aluno',60,60)

// SOURCE A FONTE PODE SER HTML-formatted string, OU UMA REFERÊNCIA
// PARA UM ELEMENTO ONDE O TEXTO SERÁ EXTRAÍDO.
            , source = $('#consultar')[0]

// we support special element handlers. Register them with jQuery-style
// ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
// There is no support for any other type of selectors
// (class, of compound) at this time.
            , specialElementHandlers = {
            // element with id of "bypass" - jQuery style selector
            '#bypassme': function (element, renderer) {
                // true = "handled elsewhere, bypass text extraction"
                return true
            }
        }

        margins = {
            top: 80,
            bottom: 60,
            left: 40,
            width: 522
        };
        // all coords and widths are in jsPDF instance's declared units
        // 'inches' in this case

        pdf.fromHTML(
            source // HTML string or DOM elem ref.
            , margins.left // x coord
            , margins.top // y coord
            , {
                'width': margins.width // max width of content on PDF
                , 'elementHandlers': specialElementHandlers
            },

            function (dispose) {
                // dispose: object with X, Y of the last line add to the PDF
                //          this allow the insertion of new lines after html
                pdf.save('Detalhe do Aluno.pdf');
            },
            margins
        )
    }

</script>



{% endblock %}